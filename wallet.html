<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <link rel="icon" href="logo.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Enderman Cheers Wallet</title>
  q
</head>
<body>
  <div class="iphone-container">
    <h1>ENDERMAN CHEERS WALLET</h1>

    <!-- Conectar Carteira -->
    <div class="card">
      <button id="connectBtn">Conectar Carteira</button>
      <div id="walletAddr" class="small">Status: desconectado</div>
    </div>

    <!-- Seleção de Ativos -->
    <div class="card">
      <div class="input-box">
        <label for="assetSelect">Selecione seu ativo:</label>
        <select id="assetSelect">
          <option value="">Selecione um ativo</option>
          <option value="nix_ore" data-nix="10" data-label="NIX-ALOT Ore">NIX-ALOT Ore</option>
          <option value="nix_craft" data-nix="50" data-label="NIX-ALOT Craft">NIX-ALOT Craft</option>
          <option value="nix_redstone" data-nix="100" data-label="NIX-ALOT Redstone">NIX-ALOT Redstone</option>
          <option value="nix_diamond" data-nix="200" data-label="NIX-ALOT Diamond">NIX-ALOT Diamond</option>
          <option value="nix_gold" data-nix="150" data-label="NIX-ALOT Gold">NIX-ALOT Gold</option>
          <option value="nix_emerald" data-nix="300" data-label="NIX-ALOT Emerald">NIX-ALOT Emerald</option>
          <option value="nix_lapis" data-nix="80" data-label="NIX-ALOT Lapis">NIX-ALOT Lapis</option>
          <option value="nix_netherite" data-nix="500" data-label="NIX-ALOT Netherite">NIX-ALOT Netherite</option>
        </select>
      </div>
    </div>

    <!-- Ticker horizontal -->
    <div class="card">
      <div class="ticker-horizontal">
        <div id="tickerTrack" class="ticker-track">
          <!-- O ticker será preenchido aqui pelo script -->
        </div>
      </div>
    </div>

    <!-- PIX + Mint -->
    <div class="card">
      <h2 style="text-align:center">APOLO26 PRESS F11</h2>
      <input id="pixValue" placeholder="Valor (BRL)"/>
      <input id="pixUserKey" placeholder="Chave PIX"/>
      <input id="userNote" placeholder="Observação (opcional)"/>
      <button id="pixQRBtn">Gerar QR Code + Mint</button>
      <div id="pixQRContainer"></div>
    </div>

    <!-- Logs -->
    <div class="card">
      <pre id="log">RUNNING HORIGAMI SUIT 6G.01 ...</pre>
    </div>

    <footer class="footer">© CEO LUCAS JANUARIO BRNC INC ®</footer>
  </div>

<script>
// Função para buscar o valor do Dólar em tempo real
async function fetchDollarPrice() {
  const response = await fetch('https://api.exchangerate-api.com/v4/latest/USD');
  const data = await response.json();
  return data.rates.BRL;
}

// Atualizar o ticker com o valor dos ativos com base no preço do dólar
async function updateTicker() {
  const dollarPrice = await fetchDollarPrice();
  const tickerTrack = document.getElementById('tickerTrack');

  if (!dollarPrice) {
    tickerTrack.innerHTML = "Erro ao carregar os dados do dólar";
    return;
  }

  const assetSelect = document.getElementById('assetSelect');
  const selectedOption = assetSelect.options[assetSelect.selectedIndex];

  if (selectedOption.value) {
    const assetValue = parseInt(selectedOption.getAttribute('data-nix'));
    const priceInBRL = (assetValue * dollarPrice).toFixed(2);

    const tickerElement = document.createElement('div');
    tickerElement.classList.add('ticker-item');

    const symbol = document.createElement('span');
    symbol.textContent = `${selectedOption.getAttribute('data-label')}:`;

    const price = document.createElement('span');
    price.classList.add('positive');
    price.textContent = `R$ ${priceInBRL}`;

    const change = document.createElement('span');
    change.textContent = '↑ 0.3%';

    const triangle = document.createElement('div');
    triangle.classList.add('triangle-up');

    tickerElement.appendChild(symbol);
    tickerElement.appendChild(price);
    tickerElement.appendChild(change);
    tickerElement.appendChild(triangle);

    tickerTrack.innerHTML = '';  // Limpa o ticker
    tickerTrack.appendChild(tickerElement);
  }
}

// Atualizar o ticker a cada 10 segundos
setInterval(updateTicker, 10000);
updateTicker();  // Chama a função para atualizar imediatamente na primeira vez
</script>
</body>
</html>
